// gMap компонент
// методы API 
init() - инициализация копонента

initMap(container, tagId) - инициализация карты, получение и парсинг контейнера с настройками и массива локаций, запуск методов отрисовки карты в 
соответствии с настройками
структура контейнера
container
//опции отображенния элеентов на карте
 options:
            {
                userLocation: boolean,             //показать локации пользователя
                showAllRegions: boolean,			//показать все локации обслуживания всех точек
                showLocationInRange: boolean		//показать локацию, в которую попадает пользователь
            },
			//массив локаций
			locations:
                [
                    {
                        lat: number,				//широта
                        lng: number,				//долгота
                        description: string,		//описание локации
                        img: number,				//путь к изображению
                        radius: number,				//радиус обслуживания
                        cssStyle:					//стили для отбражения 
                        {
                            circleOptions:			//форматирование окружности(зоны обслуживания)
                            {
                                fillColor: string,		//цвет заливки 
                                fillOpacity: number,	//прозрачность заливки
                                strokeColor: string,	//цвет окружности
                                strokeOpacity: number,	//прорачность окружности
                                strokeWeight: number	//толщина окружности
                            }
                        }
                    }
				]
// внутренние методы

renderMap(locations) - получает массив объектов с координатами и описанием локации, создает карту и отображает локации из массива

_getLocation() - получает местонахождение пользователя, вызов коллбэка при успехе/неудаче

_geolocationSuccess(position) -  при удачном определении пользователя - отрисовка маркера пользователя на карте

_geolocationFailure - внутренний метод при неудачном определении позиции пользователя

_showUser(location) - отображаем местоположение пользователя на карте в точке с переданными координатами после геолокации  

_isInDestination(center, radius, point) - определяем находится ли точка в радиусе обслуживания локации, принимает локацию, радиус обслуживания, текущую точку, return true||false

_getCenter(locations) - определение центра карты - географический центр массива локаций

_isPoint(location) - проверка объекта на наличие координатат

 Пример
 Вызов копонента
 <script>
    $('#gmtest').click(function () {
        //контенер с настроками и массивом локаций
		let container =
        {
			//опции:  включаем геолокацию, отключаем показ всех зон обслужвания, показываем точку, в чью зону попадает пользователь
            options:
            {
                userLocation: true,
                showAllRegions: false,
                showLocationInRange: true,
            },

            locations:
                [
                    {
                        lat: 43.5868685,
                        lng: 39.7299474,
                        description: '<p style="font-weight:bolder; font-style:italic;">Стилизованый текст из вызывающего метода</p> <p style="color:brown;" > Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>',
                        img: 'some url',
                        radius: 500,
                        cssStyle:
                        {
                            circleOptions:
                            {
                                fillColor: '#a0bfeb',
                                fillOpacity: 0.2,
                                strokeColor: '#000000',
                                strokeOpacity: 1,
                                strokeWeight: 1
                            }
                        },
                    },
                    {
                        lat: 43.6085269,
                        lng: 39.7313797,
                        description: 'вторая точка',
                        img: 'some url',
                        radius: 1000,
                        cssStyle:
                        {
                            circleOptions:
                            {
                                fillColor: '#a0bfeb',
                                fillOpacity: 0.2,
                                strokeColor: '#000000',
                                strokeOpacity: 1,
                                strokeWeight: 1
                            }
                        },
                    },
                    {
                        lat: 43.6191221,
                        lng: 39.7218364,
                        description: 'третья точка',
                        img: 'some url',
                        radius: 500,
                        cssStyle:
                        {
                            circleOptions:
                            {
                                fillColor: '#a0bfeb',
                                fillOpacity: 0.2,
                                strokeColor: '#000000',
                                strokeOpacity: 1,
                                strokeWeight: 1
                            }
                        },
                    },
                    {
                        lat: 43.593971,
                        lng: 39.736433,
                        description: 'четвертая точка',
                        img: 'some url',
                        radius: 500,
                        cssStyle:
                        {
                            circleOptions:
                            {
                                fillColor: '#a0bfeb',
                                fillOpacity: 0.2,
                                strokeColor: '#000000',
                                strokeOpacity: 1,
                                strokeWeight: 1
                            }
                        },
                    },
                    {
                        lat: 43.660057,
                        lng: 39.660181,
                        description: 'пятая точка',
                        img: 'some url',
                        radius: 700,
                        cssStyle:
                        {
                            circleOptions:
                            {
                                fillColor: '#a0bfeb',
                                fillOpacity: 0.2,
                                strokeColor: '#000000',
                                strokeOpacity: 1,
                                strokeWeight: 1
                            }
                        },
                    },
                ]
        };

        let _container = JSON.stringify(container);
        let m = gMap;
        m.init();
        m.initMap(_container, 'map');
    });
</script>
